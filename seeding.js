const axios = require("axios").default;

const STRAPI_TOKEN =
  "991cdf57b2f4e50e003443ea443ee7d0e58c28ab0d6c5b017de1478910dade68d23c96dcb5589906da6034098c47829bf74f0c6acfa3bbf1a065bb7cb4cc5b63fcf40fa04315c358fab925276c0091a48ae6f255d32607bbe18ec1b00d11b104a0a13fe66ab710e3d1231bc62a0f4474df9115fd487d8fe91c497b425c45a2b7";
const API_URL = "http://map.mekongnet.com.kh:1337/api";
function createOne(path, rawData) {
  return axios({
    method: "post",
    url: `${API_URL}${path}`,
    headers: {
      "Content-Type": "application/json",
      Authorization: `bearer ${STRAPI_TOKEN}`,
    },
    data: { data: rawData },
  })
    .then((response) => {
      console.log(response.data);
    })
    .catch((error) => {
      if (error.response) {
        // The request was made and the server responded with a status code
        // that falls out of the range of 2xx
        console.log(error.response.data);
        console.log(error.response.status);
      } else if (error.request) {
        // The request was made but no response was received
        // `error.request` is an instance of XMLHttpRequest in the browser and an instance of
        // http.ClientRequest in node.js
        console.log(error.request);
      } else {
        // Something happened in setting up the request that triggered an Error
        console.log("Error", error.message);
      }
    });
}
const sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));

async function seed(items, type) {
  for (let item of items) {
    try {
      await createOne(`\/${type}`, item);
      await sleep(500);
    } catch (error) {
      console.log(error);
    }
  }
}

const data = [
  {
    name: "IDC1.11.4.1--DC1.7.6.1",
    postal_code: 120000,
    cores: 16,
    lat: 11.536069,
    lng: 104.928337,
    manufacturer: "Senko 1:16",
    port_type: "SC/APC",
    physical_address: "St.41 (Near Tai meng Hotel)",
  },
  {
    name: "POP7.11.2.1--7-14.17",
    postal_code: 120000,
    cores: 8,
    lat: 11.550756,
    lng: 104.921503,
    manufacturer: "Sun Telecom 1:8",
    port_type: "SC/APC",
    physical_address: "St. Monivong near St.310, in front of BIDC bank.",
  },
  {
    name: "POP7.11.2.3--DC1.7.8",
    postal_code: 120000,
    cores: 8,
    lat: 11.53461712,
    lng: 104.9291998,
    manufacturer: "Senko 2:8",
    port_type: "SC/APC",
    physical_address: "St.41, in front of PPCB bank",
  },
  {
    name: "POP7.11.2.4--7-12.3",
    postal_code: 120000,
    cores: 16,
    lat: 11.513736,
    lng: 104.935419,
    manufacturer: "Senko 1:16",
    port_type: "SC/APC",
    physical_address: "National Road 2(in front of Chak angre lue pagoda)",
  },
  {
    name: "POP7.11.3.1--7-14.13",
    postal_code: 120000,
    cores: 16,
    lat: 11.547556,
    lng: 104.921981,
    manufacturer: "Senko 1:16",
    port_type: "SC/APC",
    physical_address: "St. Monivong, front of WB finance.",
  },
  {
    name: "POP7.11.3.2--6-7.9",
    postal_code: 120000,
    cores: 8,
    lat: 11.531461,
    lng: 104.913681,
    manufacturer: "Sun Telecom 1:8",
    port_type: "SC/APC",
    physical_address: "Phum Sansam Kosal, St.271 front of Wat sonsom kosa",
  },
  {
    name: "POP7.11.3.3--6-7.6 (1)",
    postal_code: 120000,
    cores: 8,
    lat: 11.542767,
    lng: 104.913936,
    manufacturer: "Senko 1:8",
    port_type: "SC/PC",
    physical_address: "St.163 corner st.418, Sangkat tul tumpung",
  },
  {
    name: "POP7.11.3.4--6-7.11.1",
    postal_code: 120000,
    cores: 8,
    lat: 11.523683,
    lng: 104.918547,
    manufacturer: "Senko 1:8",
    port_type: "SC/APC",
    physical_address: "St.69rd corner st.48BT (near Wat Dombuk khbos)",
  },
  {
    name: "POP7.11.4.1--716.3",
    postal_code: 120000,
    cores: 8,
    lat: 11.524592,
    lng: 104.937325,
    manufacturer: "Senko 1:8",
    port_type: "SC/APC",
    physical_address: "St.369 corner st.Hitech",
  },
  {
    name: "POP7.11.4.2--27.17",
    postal_code: 120000,
    cores: 8,
    lat: 11.536389,
    lng: 104.923456,
    manufacturer: "Suntelecom",
    port_type: "SC/APC",
    physical_address: "st.93 in front of Royal University Of Law And Econ",
  },
  {
    name: "POP7.11.4.2.4--27.17.1",
    postal_code: 120000,
    cores: 4,
    lat: 11.537058,
    lng: 104.923319,
    manufacturer: "Senko",
    port_type: "SC/APC",
    physical_address: "Monivong Blvd, Infront Ministry of Social Affairs",
  },
  {
    name: "POP7.11.4.3--7-14.9",
    postal_code: 120000,
    cores: 16,
    lat: 11.5444998,
    lng: 104.922487,
    manufacturer: "Senko 1:16",
    port_type: "SC/APC",
    physical_address: "St.93, in front of Toyota boukor near stop boukor",
  },
  {
    name: "POP7.11.4.4--7-12.4.1",
    postal_code: 120000,
    cores: 16,
    lat: 11.512814,
    lng: 104.934192,
    manufacturer: "Suntelecom",
    port_type: "SC/APC",
    physical_address: "St.60m, Sangkat Chak Angre",
  },
  {
    name: "POP7.11.5.1--7-8.8",
    postal_code: 120000,
    cores: 16,
    lat: 11.524681,
    lng: 104.892756,
    manufacturer: "Senko 1:16",
    port_type: "SC/APC",
    physical_address: "St.371, Phnom Penh, Cambdia",
  },
  {
    name: "POP7.11.5.2--7-8.5",
    postal_code: 120000,
    cores: 16,
    lat: 11.520997,
    lng: 104.905419,
    manufacturer: "Senko 1:16",
    port_type: "SC/APC",
    physical_address: "St.371, Phnom Penh, Cambodia",
  },
  {
    name: "POP7.11.5.3--716.4",
    postal_code: 120000,
    cores: 16,
    lat: 11.533317,
    lng: 104.9535,
    manufacturer: "Senko 1:16",
    port_type: "SC/APC",
    physical_address: "National Road 1, Sangkat Niroth, Kh",
  },
  {
    name: "POP7.11.5.4.4--716.3.1",
    postal_code: 120000,
    cores: 16,
    lat: 11.503964,
    lng: 104.945611,
    manufacturer: "SunTelecom 1:16",
    port_type: "SC/APC",
    physical_address: "Street 369, Chba Ampov, Phnom Penh",
  },
  {
    name: "POP7.11.6--6-7.8.2",
    postal_code: 120000,
    cores: 32,
    lat: 11.538342,
    lng: 104.916981,
    manufacturer: "Suntelecom",
    port_type: "SC/APC",
    physical_address: "St.460 corner st.135, Sangkat tul tom pung ti 1",
  },
  {
    name: "POP7.11.7.1--7.0.1.1",
    postal_code: 120000,
    cores: 8,
    lat: 11.56515627,
    lng: 104.8566508,
    manufacturer: "SunTelecom",
    port_type: "SC/APC",
    physical_address: "Sangkat Phsar Deum Tkov, Khan Chamkarmon, Phnom Pe",
  },
  {
    name: "POP7.11.7.2--7-12.4",
    postal_code: 120000,
    cores: 8,
    lat: 11.507342,
    lng: 104.938339,
    manufacturer: "Senko 1:8",
    port_type: "SC/PC",
    physical_address: "National Road 2, Sangkat Chak Angre, Khan Mean Che",
  },
  {
    name: "POP7.11.7.3--7-14.44",
    postal_code: 120000,
    cores: 4,
    lat: 11.574458,
    lng: 104.917897,
    manufacturer: "Senko 1:4",
    port_type: "SC/APC",
    physical_address: "St. Monivong, in front of National University of M",
  },
  {
    name: "POP7.11.7.4--7-12.2(2)",
    postal_code: 120000,
    cores: 16,
    lat: 11.524836,
    lng: 104.932114,
    manufacturer: "Senko 1:16",
    port_type: "SC/APC",
    physical_address: "National Road 2(Chak Angre Lue)",
  },
  {
    name: "POP7.11.8.1--7-12.2(1)",
    postal_code: 120000,
    cores: 16,
    lat: 11.524836,
    lng: 104.932114,
    manufacturer: "Senko 1:16",
    port_type: "FC/PC",
    physical_address: "National Road 2(Chak Angre Lue)",
  },
  {
    name: "POP7.11.8.2--DC1.7.9.1 (E Park Capital)",
    postal_code: 120000,
    cores: 4,
    lat: 11.533044,
    lng: 104.929625,
    manufacturer: "Senko 1:4",
    port_type: "SC/PC",
    physical_address: "Norodom Blvd, in 23rd floor Building E Park Capita",
  },
  {
    name: "POP7.11.8.3--6-7.8",
    postal_code: 120000,
    cores: 16,
    lat: 11.535094,
    lng: 104.914131,
    manufacturer: "Senko 2:16",
    port_type: "SC/APC",
    physical_address: "St.498 corner st.163",
  },
  {
    name: "POP7.11.8.4--7-8.4",
    postal_code: 120000,
    cores: 16,
    lat: 11.519458,
    lng: 104.912089,
    manufacturer: "Senko 2:16",
    port_type: "SC/APC",
    physical_address: "St.371, Phnom Penh, Cambdia",
  },
  {
    name: "POP7.12.1.1--6-7.8.2",
    postal_code: 120000,
    cores: 8,
    lat: 11.538342,
    lng: 104.916981,
    manufacturer: "Sun Telecom 1:8",
    port_type: "SC/APC",
    physical_address: "St.460 corner st.135, Sangkat tul tom pung ti 1",
  },
  {
    name: "POP7.12.1.2--6-7.6 (2)",
    postal_code: 120000,
    cores: 16,
    lat: 11.542767,
    lng: 104.913936,
    manufacturer: "Sun Telecom 1:16",
    port_type: "SC/APC",
    physical_address: "St.163 corner st.418, Sangkat tul tumpung",
  },
  {
    name: "POP7.12.1.4--6-7.5",
    postal_code: 120000,
    cores: 8,
    lat: 11.541506,
    lng: 104.912044,
    manufacturer: "Senko 1:8",
    port_type: "SC/PC",
    physical_address: "St.432 corner st.167, Sangkat Tuol Tumpung 2",
  },
  {
    name: "POP7.12.1.4.2--6-7.5",
    postal_code: 120000,
    cores: 8,
    lat: 11.541506,
    lng: 104.912044,
    manufacturer: "Senko 1:8",
    port_type: "SC/PC",
    physical_address: "St.432 corner st.167, Sangkat Tuol Tumpung 2",
  },
  {
    name: "POP7.12.1.4.5--6-7.5",
    postal_code: 120000,
    cores: 2,
    lat: 11.541506,
    lng: 104.912044,
    manufacturer: "Suntelecom",
    port_type: "SC/APC",
    physical_address: "St.432 corner st.167, Sangkat Tuol Tumpung 2",
  },
  {
    name: "POP7.12.2.3--6-7.9.3",
    postal_code: 120000,
    cores: 16,
    lat: 11.5293,
    lng: 104.916064,
    manufacturer: "Senko 1:16",
    port_type: "SC/APC",
    physical_address: "St.430 corner st.502, Sangkat Tuol Tumpung 2",
  },
  {
    name: "POP7.12.2.4--6-7.3",
    postal_code: 120000,
    cores: 16,
    lat: 11.543108,
    lng: 104.906744,
    manufacturer: "Senko 1:16",
    port_type: "SC/PC",
    physical_address: "St.271 corner st.183, near University of Health Sc",
  },
  {
    name: "POP7.12.3--In Urban (aid: 11606)",
    postal_code: 120000,
    cores: 2,
    lat: 11.539961,
    lng: 104.922001,
    manufacturer: "Suntelecom",
    port_type: "SC/APC",
    physical_address: "CITY LIGHT Building",
  },
  {
    name: "POP7.12.3.1--In Urban (aid: 11606)",
    postal_code: 120000,
    cores: 32,
    lat: 11.539961,
    lng: 104.922001,
    manufacturer: "SunTelecom",
    port_type: "SC/APC",
    physical_address: "No. 52, Street 101, Sangkat Boeung Trobek, Khan Ch",
  },
  {
    name: "POP7.12.3.2--In Urban (aid: 11606)",
    postal_code: 120000,
    cores: 32,
    lat: 11.539961,
    lng: 104.922001,
    manufacturer: "Suntelecom",
    port_type: "SC/APC",
    physical_address: "CITY LIGHT Building",
  },
  {
    name: "POP7.12.4.1--DC1.7.7",
    postal_code: 120000,
    cores: 16,
    lat: 11.535623,
    lng: 104.92884,
    manufacturer: "Senko 1:16",
    port_type: "SC/APC",
    physical_address: "St.41, in front of Tai meng hotel, khan Chamkar mo",
  },
  {
    name: "POP7.12.4.3--DC1.7.9",
    postal_code: 120000,
    cores: 16,
    lat: 11.532556,
    lng: 104.929997,
    manufacturer: "Suntelecom",
    port_type: "SC/APC",
    physical_address: "Infront of Ministry of Culture, St. Norodom",
  },
  {
    name: "POP7.12.5.4--6-7.11",
    postal_code: 120000,
    cores: 16,
    lat: 11.526714,
    lng: 104.921331,
    manufacturer: "Senko 1:16",
    port_type: "SC/APC",
    physical_address: "St.271 corner st.371",
  },
  {
    name: "POP7.12.6.1--7-12.5",
    postal_code: 120000,
    cores: 8,
    lat: 11.502756,
    lng: 104.939839,
    manufacturer: "Sun Telecom 2:8",
    port_type: "SC/APC",
    physical_address: "National Road 2 (in front Kramon market)",
  },
  {
    name: "POP7.12.6.2--7-12.5.2",
    postal_code: 120000,
    cores: 16,
    lat: 11.499248,
    lng: 104.934619,
    manufacturer: "Suntelecom1:16",
    port_type: "SC/APC",
    physical_address: "National Road 2 (in Borey kramorn market)",
  },
  {
    name: "POP7.12.6.3--7-12.5.3",
    postal_code: 120000,
    cores: 16,
    lat: 11.497969,
    lng: 104.934958,
    manufacturer: "SunTelecom 1:16",
    port_type: "SC/APC",
    physical_address: "National Road 2 (in Borey kramorn market)",
  },
  {
    name: "POP7.12.6.4--7-12.5.1",
    postal_code: 120000,
    cores: 8,
    lat: 11.50205,
    lng: 104.935747,
    manufacturer: "Sun Telecom 2:8",
    port_type: "SC/APC",
    physical_address: "National Road 2",
  },
  {
    name: "POP7.12.7.1--27.24",
    postal_code: 120000,
    cores: 8,
    lat: 11.530597,
    lng: 104.925875,
    manufacturer: "Senko 1:8",
    port_type: "SC/APC",
    physical_address: "St.93 in front of Sathapna bank",
  },
  {
    name: "POP7.12.7.2--DC2.03",
    postal_code: 120000,
    cores: 4,
    lat: 11.559875,
    lng: 104.920125,
    manufacturer: "SunTelecom 1:4",
    port_type: "SC/APC",
    physical_address: "St. 93 corner of st. 214",
  },
  {
    name: "POP7.12.7.2.--7-14.8",
    postal_code: 120000,
    cores: 8,
    lat: 11.543536,
    lng: 104.922594,
    manufacturer: "SunTelecom 1:8",
    port_type: "SC/APC",
    physical_address: "St.93 Preah Monivong Blvd (93), Phnom Penh.",
  },
  {
    name: "POP7.12.7.2.1--Cathay bank HQ",
    postal_code: 120000,
    cores: 4,
    lat: 11.559911,
    lng: 104.920889,
    manufacturer: "SunTelecom 1:4",
    port_type: "SC/APC",
    physical_address: "St. 214 ( in front of cathay bank (HQ)",
  },
  {
    name: "POP7.12.7.3--27.15",
    postal_code: 120000,
    cores: 16,
    lat: 11.538217,
    lng: 104.922844,
    manufacturer: "Senko 1:16",
    port_type: "SC/APC",
    physical_address: "St.466 corner S.93",
  },
  {
    name: "POP7.12.7.4--27.25",
    postal_code: 120000,
    cores: 8,
    lat: 11.530258,
    lng: 104.926072,
    manufacturer: "Senko 1:8",
    port_type: "SC/APC",
    physical_address: "St.500, behind Ministry of water",
  },
  {
    name: "POP7.12.8.1--6-7.10",
    postal_code: 120000,
    cores: 8,
    lat: 11.528581,
    lng: 104.915342,
    manufacturer: "Senko 1:8",
    port_type: "SC/PC",
    physical_address: "S.271, Sangkat Phsa dem Thkov",
  },
  {
    name: "POP7.12.8.1.4--6-7.10 (Extend)",
    postal_code: 120000,
    cores: 4,
    lat: 11.528581,
    lng: 104.915342,
    manufacturer: "Senko 1:4",
    port_type: "SC/PC",
    physical_address: "St.271, Sangkat Phsa dem thkov",
  },
  {
    name: "POP7.12.8.2--27.12",
    postal_code: 120000,
    cores: 4,
    lat: 11.546911,
    lng: 104.921842,
    manufacturer: "SunTelecom",
    port_type: "SC/APC",
    physical_address: "Preah Monivong Blvd (93), Phnom Penh",
  },
  {
    name: "POP7.21.3--Indoor",
    postal_code: 120000,
    cores: 2,
    lat: 11.532426,
    lng: 104.928266,
    manufacturer: "Senko 1:2",
    port_type: "SC/APC",
    physical_address: "In prince modern, street 93, khan Chamka morn, PP.",
  },
  {
    name: "POP7.21.3.1--B1 floor (Prince modern plaza)",
    postal_code: 120000,
    cores: 32,
    lat: 11.532426,
    lng: 104.928266,
    manufacturer: "Suntelecom1:32",
    port_type: "SC/APC",
    physical_address: "In prince modern, street 93, khan Chamka morn, PP",
  },
  {
    name: "POP7.21.3.2--B1 floor (Prince modern plaza)",
    postal_code: 120000,
    cores: 32,
    lat: 11.532426,
    lng: 104.928266,
    manufacturer: "Suntelecom1:32",
    port_type: "SC/APC",
    physical_address: "In prince modern, street 93, khan Chamka morn, PP",
  },
  {
    name: "POP7.31.3.1--6-7.9.2",
    postal_code: 120000,
    cores: 16,
    lat: 11.53101,
    lng: 104.910872,
    manufacturer: "Senko 1:16",
    port_type: "SC/APC",
    physical_address: "Street 31 24BT Phnom Penh, 12351, Near Sonsom kosa",
  },
  {
    name: "Sa-POP7.21.1.1--716.2.2",
    postal_code: 120000,
    cores: 8,
    lat: 11.511375,
    lng: 104.950164,
    manufacturer: "Suntelecom1:8",
    port_type: "SC/APC",
    physical_address: "Street lum, Sangkat Chbar Ampov,",
  },
  {
    name: "Sa-POP7.21.1.2--716.2.3",
    postal_code: 120000,
    cores: 16,
    lat: 11.516,
    lng: 104.947139,
    manufacturer: "Suntelecom",
    port_type: "SC/APC",
    physical_address: "St.351, Infront Borey Hi tech Ta Ngov",
  },
  {
    name: "Sa-POP7.21.1.3--716.2.1",
    postal_code: 120000,
    cores: 16,
    lat: 11.518306,
    lng: 104.947422,
    manufacturer: "Sun Telecom 1:16",
    port_type: "SC/APC",
    physical_address: "Street 351, Khan Chbar ampov.",
  },
  {
    name: "Sa-POP7.21.2.1--OCC-12MCB08",
    postal_code: 120000,
    cores: 32,
    lat: 11.521086,
    lng: 104.947464,
    port_type: "SC/APC",
    physical_address: "Street 351, Sangkat Niroth",
  },
  {
    name: "Sa-POP7.21.2.2--OCC-12MCB06",
    postal_code: 120000,
    cores: 32,
    lat: 11.515933,
    lng: 104.940539,
    port_type: "SC/APC",
    physical_address: "Street 369",
  },
  {
    name: "Sa-POP7.21.3.1--OCC-12MCB07",
    postal_code: 120000,
    cores: 32,
    lat: 11.528858,
    lng: 104.944361,
    port_type: "SC/APC",
    physical_address: "St 351, Phnom Penh",
  },
  {
    name: "Sa-POP7.21.3.2--OCC-12MCB29",
    postal_code: 120000,
    cores: 32,
    lat: 11.501639,
    lng: 104.940267,
    port_type: "SC/APC",
    physical_address: "NR2, Phnom Penh",
  },
  {
    name: "Sa-POP7.21.5--716.2",
    postal_code: 120000,
    cores: 4,
    lat: 11.531078,
    lng: 104.943733,
    manufacturer: "SunTelcom 1:4",
    port_type: "SC/APC",
    physical_address: "National Road 1 corner st.351 , Sangkat Niroth",
  },
  {
    name: "Sa-POP7.21.5.1--716.2 (1)",
    postal_code: 120000,
    cores: 16,
    lat: 11.531088,
    lng: 104.943699,
    manufacturer: "Senko 1:16",
    port_type: "LC/APC",
    physical_address: "National Road 1 corner St.351 , Sangkat Niroth",
  },
  {
    name: "Sa-POP7.21.5.2--716.2 (2)",
    postal_code: 120000,
    cores: 4,
    lat: 11.531088,
    lng: 104.943699,
    manufacturer: "Senko 1:4",
    port_type: "SC/APC",
    physical_address: "National Road 1 corner St.351 , Sangkat Niroth",
  },
  {
    name: "Sa-POP7.21.5.3--716.2.4",
    postal_code: 120000,
    cores: 8,
    lat: 11.536847,
    lng: 104.944808,
    manufacturer: "Suntelecom",
    port_type: "SC/APC",
    physical_address: "St.351,Phum Russey Sros, Sangkat Nirouth Khan Chba",
  },
  {
    name: "Sa-POP7.21.8.1--OCC-12MCB28",
    postal_code: 120000,
    cores: 32,
    lat: 11.513069,
    lng: 104.935583,
    port_type: "SC/APC",
    physical_address: "NR2, Phnom Penh",
  },
  {
    name: "Sa-POP7.21.8.2--OCC-12MCB27",
    postal_code: 120000,
    cores: 32,
    lat: 11.523419,
    lng: 104.932589,
    port_type: "SC/APC",
    physical_address: "NR2, Phnom Penh",
  },
];

const dataWithPorts = data.map((item) => {
  let ports = [];
  let {
    name,
    postal_code,
    cores,
    lat,
    lng,
    manufacturer,
    port_type,
    physical_address,
  } = item;

  for (let i = 0; i < cores; i++) {
    ports.push({
      to: "",
      name: `P${i + 1}`,
      type: port_type,
      model: `1IN-OUT${cores}`,
      status: "FREE",
    });
  }

  let newItem = {
    name,
    postal_code,
    cores,
    physical_address,
    manufacturer,
    lat_lng: {
      lat,
      lng,
    },
    ports,
  };
  console.log(newItem);
  return newItem;
});

seed(dataWithPorts, "boxes");
